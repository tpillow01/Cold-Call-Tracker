<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Edit Event</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="theme-color" content="#cc0000" />
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
  <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}" />
</head>
<body>

  <!-- Clean Header (consistent) -->
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand-wrap">
        <img src="{{ url_for('static', filename='tynan_logo.png') }}" class="logo-img" alt="Tynan" />
        <div class="brand-title">Cold Call Tracker</div>
        <img src="{{ url_for('static', filename='heli_logo.png') }}" class="logo-img" alt="HELI" />
      </div>
      <nav class="topnav">
        <a href="/">Dashboard</a>
        <a href="/schedule">Schedule</a>
        <a href="/logout">Logout</a>
      </nav>
    </div>
  </header>

  <div class="shell">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sb-title">MENU</div>
      <div class="sb-nav">
        <a class="sb-btn" href="/">Dashboard</a>
        <a class="sb-btn active" href="/schedule">ðŸ“… Schedule</a>
        <a class="sb-btn" href="/logout">Logout</a>
      </div>
      <div class="sb-legend">
        <div class="legend-item"><span class="legend-dot red"></span> Follow-up overdue</div>
        <div class="legend-item"><span class="legend-dot gray"></span> Due today</div>
      </div>
    </aside>

    <!-- Main -->
    <main>
      <section class="panel">
        <h2 class="section-title">Edit Scheduled Event</h2>

        <!-- Same grid + fields as Add Event -->
        <form method="POST" class="form form-vertical" autocomplete="on">
          <div class="form-grid">
            <div class="field col-6">
              <label class="label" for="date">Date</label>
              <input id="date" class="input" type="date" name="date" value="{{ event['date'] }}" required>
            </div>

            <div class="field col-6">
              <label class="label" for="time">Time</label>
              <input id="time" class="input" type="time" name="time" value="{{ event['time'] or '' }}">
            </div>

            <div class="field col-12">
              <label class="label" for="title">Title</label>
              <input id="title" class="input" type="text" name="title" value="{{ event['title'] }}" required
                     placeholder="Follow-up call with Acme">
            </div>

            <div class="field col-12">
              <label class="label" for="description">Notes / Description</label>
              <textarea id="description" class="textarea" name="description" rows="4"
                        placeholder="Key points, agendaâ€¦">{{ event['description'] or '' }}</textarea>
            </div>

            <div class="field col-12">
              <label class="label" for="type">Type</label>
              <select id="type" class="select" name="type">
                <option value="call"  {% if (event['type'] or 'call') == 'call' %}selected{% endif %}>Call</option>
                <option value="visit" {% if event['type'] == 'visit' %}selected{% endif %}>Customer Visit</option>
                <option value="demo"  {% if event['type'] == 'demo' %}selected{% endif %}>Site Demo</option>
              </select>
            </div>
          </div>

          <!-- Foot buttons aligned like other forms -->
          <div class="btn-row" style="margin-top:12px; display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap">
            <a class="btn" href="/schedule">Cancel</a>
            <a class="btn" href="/delete_event/{{ event['id'] }}"
               onclick="return confirm('Delete this event?')"
               style="background:#c94242;border-color:#c94242;color:#fff">Delete</a>
            <button type="submit" class="btn primary">Save</button>
          </div>
        </form>
      </section>
    </main>
  </div>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/static/sw.js').catch(()=>{});
    }
  </script>
</body>
</html>
